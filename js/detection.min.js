/*!
 * Start Bootstrap - SB Admin 2 v4.1.4 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

var videoPose,webcamPose,video=document.getElementById("video"),canvasVideo=document.createElement("canvas"),webcam=document.getElementById("webcam"),canvasWebcam=document.createElement("canvas");canvasWebcam.width=webcam.offsetWidth,canvasWebcam.height=webcam.offsetHeight,canvasVideo.width=video.offsetWidth,canvasVideo.height=video.offsetHeight;let detectorConfig,detector;function playVideo(){video.play(),window.requestAnimationFrame(captureVideo)}function pauseVideo(){video.pause()}console.log(canvasVideo.width,canvasVideo.height),window.onload=async function(){detector=await poseDetection.createDetector(poseDetection.SupportedModels.MoveNet),navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){console.log("webcam works!"),console.log(e),webcam.srcObject=e}).catch(function(e){console.log("Something went wrong!")}),window.requestAnimationFrame(capture)};async function capture(){canvasWebcam.getContext("2d").drawImage(webcam,0,0,canvasWebcam.width,canvasWebcam.height);webcamPose=await detector.estimatePoses(canvasWebcam),window.requestAnimationFrame(capture)}async function captureVideo(){canvasVideo.getContext("2d").drawImage(video,0,0,canvasVideo.width,canvasVideo.height);videoPose=await detector.estimatePoses(canvasVideo);var e=poseSimilarity(webcamPose[0].keypoints,videoPose[0].keypoints);console.log(e),window.requestAnimationFrame(captureVideo)}